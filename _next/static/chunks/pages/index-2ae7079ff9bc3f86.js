(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2934)}])},2934:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var r=t(5893),s=(t(1535),t(5437)),a=t(4051),o=t.n(a),c=t(7294),i=t(7985),l=t(4063),u=t(4299),d=t(682),f=t(5005),m=t(4184),p=t.n(m),h=t(6792),x=t(6611),v=t(9602);const y=c.forwardRef((({bsPrefix:e,className:n,variant:t,as:s="img",...a},o)=>{const c=(0,h.vE)(e,"card-img");return(0,r.jsx)(s,{ref:o,className:p()(t?`${c}-${t}`:c,n),...a})}));y.displayName="CardImg";var b=y,j=t(9059);const g=c.forwardRef((({bsPrefix:e,className:n,as:t="div",...s},a)=>{const o=(0,h.vE)(e,"card-header"),i=(0,c.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,r.jsx)(j.Z.Provider,{value:i,children:(0,r.jsx)(t,{ref:a,...s,className:p()(n,o)})})}));g.displayName="CardHeader";var w=g;const N=(0,v.Z)("h5"),P=(0,v.Z)("h6"),S=(0,x.Z)("card-body"),k=(0,x.Z)("card-title",{Component:N}),C=(0,x.Z)("card-subtitle",{Component:P}),Z=(0,x.Z)("card-link",{Component:"a"}),_=(0,x.Z)("card-text",{Component:"p"}),I=(0,x.Z)("card-footer"),E=(0,x.Z)("card-img-overlay"),$=c.forwardRef((({bsPrefix:e,className:n,bg:t,text:s,border:a,body:o,children:c,as:i="div",...l},u)=>{const d=(0,h.vE)(e,"card");return(0,r.jsx)(i,{ref:u,...l,className:p()(n,d,t&&`bg-${t}`,s&&`text-${s}`,a&&`border-${a}`),children:o?(0,r.jsx)(S,{children:c}):c})}));$.displayName="Card",$.defaultProps={body:!1};var R=Object.assign($,{Img:b,Title:k,Subtitle:C,Body:S,Link:Z,Text:_,Header:w,Footer:I,ImgOverlay:E}),O=t(1555),A=t(1608),T=t(7178),H=t(7902),F=t(1085),L=t(4878),M=t(3075),z=t(2388);function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function U(e,n,t,r,s,a,o){try{var c=e[a](o),i=c.value}catch(l){return void t(l)}c.done?n(i):Promise.resolve(i).then(r,s)}function W(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function o(e){U(a,r,s,o,c,"next",e)}function c(e){U(a,r,s,o,c,"throw",e)}o(void 0)}))}}function X(e,n){return null!=n&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}function D(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,s,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(i){c=!0,s=i}finally{try{o||null==t.return||t.return()}finally{if(c)throw s}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=[[T.O,T.P],[F.a,F.P],[H.L,H.P]];function J(){var e=(0,i.useWeb3React)(),n=e.connector,t=e.chainId,s=e.account,a=e.provider;console.log("[Posts] Priority Connector is: ".concat((0,L.o)(n))),console.log("[Posts] ChainId is: ".concat(t)),console.log("[Posts] Account is: ".concat(s)),console.log("[Posts] Provider is: ".concat(a));var d=(0,c.useState)(""),m=d[0],p=d[1],h=(0,c.useState)(""),x=(h[0],h[1],(0,c.useState)([])),v=x[0],y=x[1],b=(0,c.useState)({}),j=b[0];b[1];function g(){return(g=W(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[Posts] will upvote: ",t),!X(n,u.MetaMask)||!a){e.next=5;break}return r=new l.CH(M.lm,z,a.getSigner()),e.next=5,r.upVote(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)((function(){function e(){return(e=W(o().mark((function e(){var n,t,r,s,c,i,u,d,f,m,h,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=27;break}return n=new l.CH(M.lm,z,a),e.next=4,n.name();case 4:return t=e.sent,e.next=7,n._head();case 7:r=e.sent,s=[],c=r,i=0;case 11:if(!(i<12&&0!=c)){e.next=25;break}return e.next=14,n._posts(c);case 14:return u=e.sent,e.next=17,n.tokenURI(u.id);case 17:d=e.sent,s.push(u),f=D(d.split(","),2),m=f[0],h=f[1],"data:application/json;base64"==m&&(x=JSON.parse(atob(h)),j[u.id]=x),c=u._next;case 22:i++,e.next=11;break;case 25:y(s),p(t);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}H.L.activate().catch((function(){console.debug("Failed to connect to network")})),""==m&&function(){e.apply(this,arguments)}()}),[a]),(0,r.jsx)(r.Fragment,{children:v.map((function(e){var n=e.id;return(0,r.jsx)(O.Z,{xs:12,md:3,children:(0,r.jsxs)(R,{children:[(0,r.jsx)(R.Img,{variant:"top",src:j[n].image}),(0,r.jsxs)(R.Body,{children:[(0,r.jsx)(R.Title,{children:(0,r.jsxs)("span",{className:"h6",children:["#",n.toString()," \xa0",(0,r.jsx)("small",{children:(0,r.jsxs)("a",{className:"text-success text-decoration-none",href:j[n].link,children:[decodeURIComponent(escape(j[n].title)).substr(0,6),"...(\u27a6\u539f\u6587)"]})})]})}),(0,r.jsx)(R.Text,{children:(0,r.jsxs)("span",{className:"d-flex justify-content-between",children:[(0,r.jsx)("span",{className:"p-2",children:(0,r.jsx)("small",{className:"text-muted",children:new Date(1e3*e.timestamp).toLocaleString("zh-CN")})}),(0,r.jsx)("span",{className:"p-2",children:(0,r.jsx)(f.Z,{variant:"light",size:"sm",onClick:function(){return function(e){return g.apply(this,arguments)}(e.id)},children:(0,r.jsxs)("small",{children:["\ud83d\udc4d ",e.points.toString()]})})})]})})]})]})},n)}))})}function V(){return(0,r.jsx)(A.Z,{xs:1,md:"auto",className:"g-4",children:(0,r.jsx)(J,{})})}function q(){return(0,r.jsx)(i.Web3ReactProvider,{connectors:G,children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(V,{})})})}function K(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{}),(0,r.jsx)(q,{})]})}},1608:function(e,n,t){"use strict";var r=t(4184),s=t.n(r),a=t(7294),o=t(6792),c=t(5893);const i=a.forwardRef((({bsPrefix:e,className:n,as:t="div",...r},a)=>{const i=(0,o.vE)(e,"row"),l=(0,o.pi)(),u=(0,o.zG)(),d=`${i}-cols`,f=[];return l.forEach((e=>{const n=r[e];let t;delete r[e],null!=n&&"object"===typeof n?({cols:t}=n):t=n;const s=e!==u?`-${e}`:"";null!=t&&f.push(`${d}${s}-${t}`)})),(0,c.jsx)(t,{ref:a,...r,className:s()(n,i,...f)})}));i.displayName="Row",n.Z=i}},function(e){e.O(0,[774,714,425,798,389,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);